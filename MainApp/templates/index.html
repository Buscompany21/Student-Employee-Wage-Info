{% extends 'base.html' %}
{% block content %}

<div class="d-flex flex-row align-items-center justify-content-between">
    <h1>
        Employments for {{ semester }}
    </h1>
    
    <div class="dropdown">
        <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">
          {{ semester }}
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
            {% for s in semesters %}
            <li><a class="dropdown-item" href={% url 'index' s.id %}>{{ s }}</a></li>
            {% endfor %}
        </ul>
    </div>
</div>
<div class="table-responsive">
<table class="table table-responsive table-striped">
    <thead>
        <tr>
            <th>Student Name</th>
            <th>Supervisor</th>
            <th>Employment</th>
            <th>Current Pay Rate</th>
            <th>Last Pay Increase</th>
            <th>Pay Increase Amount</th>
            <th>Qualtrics Survey Sent</th>
            <th>EForm Submission</th>
            <th>Work Auth Recieved</th>
            <th>Name Change Complete</th>
        </tr>
    </thead>
    {% for employment in employments %}
        <tr>
            <td>
                <a class="text-decoration-none" href={% url 'edit-student' employment.student.person_id %}>{{employment.student.person.full_name}}</a>
            </td>
            <td>
                <a class="text-decoration-none" href={% url 'edit-instructor' employment.supervisor.person_id %}>{{employment.supervisor.person.full_name}}</a>
            </td>
            <td>
                <a class="text-decoration-none" href={% url 'edit-employment' employment.id %}>
                    {{employment.position_type}}
                    {% if employment.class_code %}({{employment.class_code}}){% endif %}
                </a>
            </td>
            <td>
                <a class="text-decoration-none" href={% url 'update-payrate' employment.id %}>
                    {% if employment.current_pay_rate %}${% endif %}{{ employment.current_pay_rate.pay_rate|default:"None"}}
                </a>
            </td>
            <td>
                {{ employment.current_pay_rate.effective_date|date:"M. d, Y"|default:"None" }}
            </td>
            <td>
                {% if employment.pay_increase_amount %}${% endif %}{{ employment.pay_increase_amount|default:"N/A" }}
            </td>
            <td>
                {{employment.survey_sent|date:"M. d, Y"|default:"No"}}
            </td>
            <td>
                {{employment.eform_submission|date:"M. d, Y"|default:"No"}}
            </td>
            <td>
                {{employment.work_auth_received|date:"M. d, Y"|default:"No"}}
            </td>
            <td>
                {{employment.name_change_complete|date:"M. d, Y"|default:"No"}}
            </td>
        </tr>
    {% endfor %}
</table>
</div>

<a class="btn btn-primary" href={% url 'create-instructor' %}>Create Instructor</a>
<a class="btn btn-primary" href={% url 'create-student' %}>Create Student</a>
<a class="btn btn-primary" href={% url 'create-employment' %}>Create Employment</a>

<div class="tableauPlaceholder">
    <div class='tableauPlaceholder' id='viz1667705890967' style='position: relative'><noscript><a href='#'><img alt='Dashboard 1 ' src='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Pr&#47;ProjectDashboard_16677058437530&#47;Dashboard1&#47;1_rss.png' style='border: none' /></a></noscript><object class='tableauViz'  style='display:none;'><param name='host_url' value='https%3A%2F%2Fpublic.tableau.com%2F' /> <param name='embed_code_version' value='3' /> <param name='site_root' value='' /><param name='name' value='ProjectDashboard_16677058437530&#47;Dashboard1' /><param name='tabs' value='no' /><param name='toolbar' value='yes' /><param name='static_image' value='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Pr&#47;ProjectDashboard_16677058437530&#47;Dashboard1&#47;1.png' /> <param name='animate_transition' value='yes' /><param name='display_static_image' value='yes' /><param name='display_spinner' value='yes' /><param name='display_overlay' value='yes' /><param name='display_count' value='yes' /><param name='language' value='en-US' /><param name='filter' value='publish=yes' /></object></div>                <script type='text/javascript'>                    var divElement = document.getElementById('viz1667705890967');                    var vizElement = divElement.getElementsByTagName('object')[0];                    if ( divElement.offsetWidth > 800 ) { vizElement.style.width='1000px';vizElement.style.height='827px';} else if ( divElement.offsetWidth > 500 ) { vizElement.style.width='1000px';vizElement.style.height='827px';} else { vizElement.style.width='100%';vizElement.style.height='1277px';}                     var scriptElement = document.createElement('script');                    scriptElement.src = 'https://public.tableau.com/javascripts/api/viz_v1.js';                    vizElement.parentNode.insertBefore(scriptElement, vizElement);                </script>
</div>

{% endblock content %}